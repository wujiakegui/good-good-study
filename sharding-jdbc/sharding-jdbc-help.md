>  https://segmentfault.com/a/1190000038241298

## Java API 配置
sharding-jdbc02

### 引入依赖

```
<dependency>
    <groupId>org.apache.shardingsphere</groupId>
    <artifactId>shardingsphere-jdbc-core</artifactId>
    <version>${shardingsphere.version}</version>
</dependency>
```

### 学习博客

> https://segmentfault.com/a/1190000038241298
>
> 
>
> https://blog.csdn.net/unique_perfect/article/details/116134490





## 概述

### 什么是分库分表？

分库分表为了解决由于数据量过大而导致数据库性能降低的问题，将原来独立的数据库拆分成若干数据库组成，将数据大表拆分成若干数据表组成，使得单一数据库、单一数据表的数据量变小，从而达到提升数据库性能的目的。

### 分库分表的方式

#### 垂直分库

垂直分库是指按照业务将表进行分类，分布到不同的数据库上面，每个库可以放在不同的服务器上，它的核心理念是专库专用。
优点：

- 解决业务层面的耦合，业务清晰
- 能对不同业务的数据进行分级管理、维护、监控、扩展等
- 高并发场景下，垂直分库一定程度的提升IO、数据库连接数、降低单
  机硬件资源的瓶颈

缺点：

- 没有解决单表数据量过大的问题

#### 水平分库

一个表的数据(按数据行)分到多个不同的库，每个库只有这个表的部分数据，这些库可以分布在不同服务器，从而使访问压力被多服务器负载，大大提升性能。

#### 垂直分表

将一个表按照字段按访问频次、是否是大字段的原则拆分为多个表，每个表存储其中一部分字段。

#### 水平分表

水平分表是在同一个数据库内，把同一个表的数据按一定规则拆到多个表中。
优点：

- 优化单一表数据量过大而产生的性能问题
- 避免IO争抢并减少锁表的几率
- 库内的水平分表，解决了单一表数据量过大的问题，分出来的小表
  中只包含一部分数据，从而使得单个表的数据量
  变小，提高检索性能。

### 分库分表问题

#### 事务一致性问题

分库分表把数据分布在不同库甚至不同服务器，会带来分布式事务问题。

#### join查询



#### 主键避重



## sharding-jdbc

### sharding-jdbc介绍



### sharding-jdbc入门示例



### sharding-jdbc执行原理

当Sharding-JDBC接受到一条SQL语句时，会陆续执行 SQL解析 => 查询优化 => SQL路由 => SQL改写 => SQL执行 =>结果归并 ，最终返回执行结果。












